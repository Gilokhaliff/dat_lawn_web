const translations = {
  en: {
    brand_subtitle: "Pro-grade gear, tested weekly",
    nav_home: "Home",
    nav_bundles: "Bundles",
    nav_catalog: "Catalog",
    nav_why: "Why me",
    nav_reviews: "Reviews",
    nav_checklist: "Checklist",
    nav_faq: "FAQ",
    nav_cta: "Get a recommendation",
    hero_tagline: "Working greenkeeper • Documented picks",
    hero_heading: "Precision lawn gear, tested and recorded.",
    hero_lead:
      "Active lawn work, not a showroom: the exact tools, applications, and video workflow I use. Clear rates, safety notes, and a standing 5% Rasenwelt code (datlawncode5) for anything you add.",
    hero_primary_cta: "View catalog",
    hero_secondary_cta: "Get a recommendation",
    chip1: "Field-tested selections",
    chip2: "Safety notes + rates",
    chip3: "Find me on Instagram",
    hero_card_text:
      "<strong>Weekly routes.</strong> Everything listed and pictured rides in my truck. No filler, just what survives real lawns.",
    stat1_label: "lawn freaks influenced",
    stat2_label: "certified tools",
    stat3_label: "reply on DMs",
    strip_seen: "Field work",
    strip_seen_list: "Active greenkeeper, weekly routes",
    strip_tested: "Community",
    strip_tested_list: "25k+ lawn freaks learning together",
    strip_guarantee: "Transparency",
    strip_guarantee_list: "No paid hype, only what I use",
    promo_pill: "Ongoing perk",
    promo_heading: "5% off every Rasenwelt product",
    promo_sub: "Use my code on any Rasenwelt item, anytime.",
    promo_band_text: "5% off every Rasenwelt product • Code: datlawncode5 • No expiry",
    promo_code_label: "Code",
    promo_cta: "Shop Rasenwelt",
    bundles_pill: "Featured bundles",
    bundles_heading: "Ready-to-go kits for fast wins",
    bundles_sub: "Grab a kit that matches your yard. Each bundle has the exact tools and products I use with clients.",
    bundles_cta: "Need a custom kit?",
    bundle1_title: "Starter Stripe Kit",
    bundle1_desc: "Get clean cuts and light striping on most cool-season lawns.",
    bundle1_li1: "Pro reel or rotary mower pick",
    bundle1_li2: "Edge + trim basics",
    bundle1_li3: "First-feed fertilizer (pet safe)",
    bundle1_li4: "Hose-end sprayer & surfactant",
    bundle1_btn: "Build this kit",
    bundle2_title: "Pro Striping Kit",
    bundle2_desc: "For the neighbors-stare lawns: higher nitrogen, roller, and foliar touches.",
    bundle2_li1: "Stripe roller attachment",
    bundle2_li2: "Fast-release foliar feed",
    bundle2_li3: "Selective weed control",
    bundle2_li4: "Soil probe & pH tester",
    bundle2_btn: "Book a consult",
    bundle3_title: "Season Rescue",
    bundle3_desc: "Fix thin spots or bounce back after heat with a one-month plan.",
    bundle3_li1: "Aeration + overseed picks",
    bundle3_li2: "Starter fert + watering plan",
    bundle3_li3: "Fungus watch list",
    bundle3_li4: "Follow-up coaching DM",
    bundle3_btn: "I want this",
    catalog_pill: "Catalog",
    catalog_heading: "Everything I actually use",
    catalog_sub: "Tools, consumables, ebooks, and seasonal picks. Tap through to purchase - affiliate links where noted.",
    catalog_btn: "Talk with me",
    group1_title: "Tools I use",
    group1_sub: "Mowers, trimmers, edging, soil probes.",
    group2_title: "Consumables",
    group2_sub: "Fertilizers, weed control, surfactants.",
    group5_title: "Professional video gear",
    group5_sub: "What I use to film kits, demos, and guides.",
    group3_title: "Ebooks & Guides",
    group3_sub: "Instant downloads with step-by-step plans.",
    group4_title: "Seasonal picks",
    group4_sub: "What I’m using right now for the weather.",
    highlights_pill: "Why trust these picks",
    highlights_heading: "Field-tested gear from an active greenkeeper",
    why_logo_title: "DAT LAWN GUY",
    why_logo_sub: "Field notes, not fluff",
    why_quote: "Field-tested notes from weekly routes - what survives real lawns.",
    why_intro:
      "I don’t just film lawn care - I live it. I test, experiment, make mistakes, learn, and show openly what actually works - not what marketing teams want to sell.",
    why_para:
      "Everything here comes from real practice: irrigation, overseeding, fertilizer strategies, troubleshooting, care plans, and full transformations from “meh” to premium turf.",
    why_point1: "A growing community and brand partners, but recommendations stay honest: only what makes sense.",
    why_point2: "No hype, no miracle products. Clear steps, transparent explanations, modern solutions.",
    why_point3: "If you take lawn care seriously and want results, you’re in the right place.",
    why_outro: "Looking for someone who treats lawn care like a craft and shares it plainly? Let’s get your turf there.",
    why_stat1_label: "Routes per week",
    why_stat2_label: "Rasenwelt code",
    why_stat3_label: "Community",
    why_tag1: "Unpaid picks",
    why_tag2: "Photo + video proof",
    why_tag3: "Safety + rates noted",
    testimonials_pill: "Testimonials",
    testimonials_heading: "Lawns that made the block stop",
    testimonials_sub: "Real results from people who followed these kits and guides.",
    reviews_pill: "Reviews",
    reviews_heading: "Leave a note for the next lawn nerd",
    reviews_sub: "Share how the kits or guides worked for you. Fresh feedback keeps this list honest.",
    reviews_form_title: "Leave a comment",
    reviews_label_name: "Name",
    reviews_label_comment: "Comment",
    reviews_placeholder_name: "Your name or initials",
    reviews_placeholder_comment: "What changed for your lawn?",
    reviews_label_rating: "Rating",
    reviews_button: "Post comment",
    reviews_status: "Thanks! Your comment is live.",
    reviews_empty: "No reviews yet. Be the first.",
    newsletter_pill: "Weekly checklist",
    newsletter_heading: "Get my Sunday prep email",
    newsletter_sub: "What to spray, mow height, and weather notes - one email each week.",
    newsletter_placeholder: "you@email.com",
    newsletter_button: "Send me the checklist",
    newsletter_status: "Checklist is on the way. Check your inbox.",
    faq_pill: "FAQ",
    faq_heading: "Answers before you buy",
    contact_pill: "Contact",
    contact_heading: "Need a personalized kit?",
    contact_sub: "Tell me about your lawn and budget. I’ll reply within 48 hours.",
    contact_cta_call: "Email",
    contact_cta_email: "Email",
    contact_how_title: "How it works",
    contact_how_li1: "Share lawn size, sun/shade, and goals.",
    contact_how_li2: "I recommend tools/products with links.",
    contact_how_li3: "Optional: 20-min live walkthrough.",
    contact_location: "Location: North Charlotte, Huntersville, Cornelius, Davidson.",
    contact_form_title: "Quick note",
    contact_label_name: "Name",
    contact_label_contact: "Email",
    contact_label_message: "What do you need?",
    contact_placeholder_name: "Your name",
    contact_placeholder_contact: "you@email.com",
    contact_placeholder_message: "Starter kit, striping, weed rescue...",
    contact_form_btn: "Send",
    contact_status: "Got it! Expect a reply within 48 hours.",
    footer_brand_sub: "Pro-grade gear, tested weekly",
    footer_note: "Affiliate links may earn a commission. I only list what I use on real lawns.",
    footer_shortcuts_title: "Shortcuts",
    footer_contact_title: "Contact",
    shortcut_bundles: "Bundles",
    shortcut_catalog: "Catalog",
    shortcut_checklist: "Checklist",
    shortcut_faq: "FAQ",
    shortcut_form: "Form",
    tag_affiliate: "Affiliate",
    tag_prop: "Pro pick",
    tag_must: "Must",
    tag_pet: "Pet safe",
    tag_cool: "Cool season",
    tag_time: "Timing critical",
    tag_spot: "Spot treat",
    tag_eff: "Efficiency",
    tag_org: "Organic",
    tag_now: "Now",
    tag_fall: "Fall",
    tag_pdf: "PDF",
    product_view: "View",
    product_buy: "Buy now",
  },
  de: {
    brand_subtitle: "Profi-Rasen-Equipment, jede Woche getestet",
    nav_home: "Startseite",
    nav_bundles: "Bundles",
    nav_catalog: "Katalog",
    nav_why: "Warum ich",
    nav_reviews: "Bewertungen",
    nav_checklist: "Checkliste",
    nav_faq: "FAQ",
    nav_cta: "Empfehlung anfordern",
    hero_tagline: "Greenkeeper im Einsatz • Dokumentierte Picks",
    hero_heading: "Präzises Rasen-Equipment, geprüft und festgehalten.",
    hero_lead:
      "Aktive Arbeit, kein Showroom: Genau die Tools, Anwendungen und Video-Workflows, die ich nutze. Klare Mengen, Sicherheits-Hinweise und der 5%-Code datlawncode5 für alles bei Rasenwelt.",
    hero_primary_cta: "Katalog ansehen",
    hero_secondary_cta: "Empfehlung anfragen",
    chip1: "Praxisgetestete Auswahl",
    chip2: "Sicherheit + Mengenangaben",
    chip3: "Finde mich auf Instagram",
    hero_card_text:
      "<strong>Wöchentliche Touren.</strong> Die gelisteten und gezeigten Tools liegen in meinem Truck. Kein Schnickschnack, nur was echte Gärten überlebt.",
    stat1_label: "Lawn Freaks erreicht",
    stat2_label: "Zertifizierte Tools",
    stat3_label: "Antwortzeit per DM",
    strip_seen: "Praxis",
    strip_seen_list: "Aktiver Greenkeeper, wöchentliche Touren",
    strip_tested: "Community",
    strip_tested_list: "25k+ Lawn Freaks lernen mit",
    strip_guarantee: "Transparenz",
    strip_guarantee_list: "Keine gekaufte Werbung, nur was ich nutze",
    promo_pill: "Dauerhafter Vorteil",
    promo_heading: "5% auf jedes Rasenwelt-Produkt",
    promo_sub: "Code für jedes Rasenwelt-Teil, jederzeit nutzbar.",
    promo_band_text: "5% auf jedes Rasenwelt-Produkt • Code: datlawncode5 • Kein Ablaufdatum",
    promo_code_label: "Code",
    promo_cta: "Rasenwelt shoppen",
    bundles_pill: "Empfohlene Bundles",
    bundles_heading: "Fertige Kits für schnelle Erfolge",
    bundles_sub:
      "Such dir das passende Set für deinen Garten. Jedes Bundle enthält genau die Tools und Produkte, die ich beim Kunden nutze.",
    bundles_cta: "Brauche ein individuelles Kit",
    bundle1_title: "Starter Stripe Kit",
    bundle1_desc: "Saubere Schnitte und leichte Streifen für kühle Saisonrasen.",
    bundle1_li1: "Spindel- oder Rotationsmäher-Empfehlung",
    bundle1_li2: "Basics für Kanten & Trimmen",
    bundle1_li3: "Startdünger (haustierfreundlich)",
    bundle1_li4: "Schlauch-Sprüher & Netzmittel",
    bundle1_btn: "Dieses Kit zusammenstellen",
    bundle2_title: "Pro Striping Kit",
    bundle2_desc: "Für Hingucker-Rasen: höherer Stickstoff, Walze und Blattdünger.",
    bundle2_li1: "Streifen-Walze",
    bundle2_li2: "Schnell wirkender Blattdünger",
    bundle2_li3: "Selektiver Unkrautstopp",
    bundle2_li4: "Bodenbohrer & pH-Tester",
    bundle2_btn: "Beratung buchen",
    bundle3_title: "Season Rescue",
    bundle3_desc: "Lichtes Gras auffüllen oder nach Hitze regenerieren - Plan für 1 Monat.",
    bundle3_li1: "Aeration + Nachsaat Empfehlungen",
    bundle3_li2: "Starterdünger + Bewässerungsplan",
    bundle3_li3: "Pilz-Checkliste",
    bundle3_li4: "Follow-up Coaching per DM",
    bundle3_btn: "Will ich haben",
    catalog_pill: "Katalog",
    catalog_heading: "Alles, was ich wirklich nutze",
    catalog_sub:
      "Werkzeuge, Verbrauchsmaterial, Ebooks und Saisontipps. Klick zum Händler - Affiliate-Links sind gekennzeichnet.",
    catalog_btn: "Sprich mit mir",
    group1_title: "Werkzeug, das ich nutze",
    group1_sub: "Mäher, Trimmer, Kanten, Bodenproben.",
    group2_title: "Verbrauchsmaterial",
    group2_sub: "Dünger, Unkrautkontrolle, Netzmittel.",
    group5_title: "Pro-Video-Equipment",
    group5_sub: "Was ich für Kit-Videos, Demos und Guides nutze.",
    group3_title: "Ebooks & Guides",
    group3_sub: "Sofort-Downloads mit Schritt-für-Schritt-Plänen.",
    group4_title: "Saisonale Picks",
    group4_sub: "Was ich aktuell wegen Wetter nutze.",
    highlights_pill: "Darum diese Picks",
    highlights_heading: "Praxisgeprüftes Equipment vom aktiven Greenkeeper",
    why_logo_title: "DAT LAWN GUY",
    why_logo_sub: "Feldnotizen statt Floskeln",
    why_quote: "Feldnotizen von wöchentlichen Routen - was echte Rasen überlebt.",
    why_intro:
      "Ich filme Rasenpflege nicht nur - ich lebe sie. Ich teste, experimentiere, mache Fehler, lerne daraus und zeige offen, was wirklich funktioniert - nicht das, was Marketing gern verkaufen würde.",
    why_para:
      "Alles hier kommt aus echter Praxis: Bewässerung, Nachsaat, Dünge-Strategien, Problembehebung, Pflegepläne und komplette Transformationen vom „na ja“-Rasen zum Premium-Rasen.",
    why_point1: "Wachsende Community und Partner, aber Empfehlungen bleiben ehrlich: nur was Sinn ergibt.",
    why_point2: "Kein Hype, keine Wunderprodukte. Klare Schritte, transparente Erklärungen, moderne Lösungen.",
    why_point3: "Wenn du Rasenpflege ernst nimmst und Ergebnisse willst, bist du hier richtig.",
    why_outro: "Du suchst jemanden, der Rasenpflege als Handwerk sieht und verständlich teilt? Dann lass uns deinen Rasen dorthin bringen.",
    why_stat1_label: "Routen pro Woche",
    why_stat2_label: "Rasenwelt-Code",
    why_stat3_label: "Community",
    why_tag1: "Unbezahlte Picks",
    why_tag2: "Foto + Video-Belege",
    why_tag3: "Sicherheit + Mengenangaben",
    testimonials_pill: "Stimmen",
    testimonials_heading: "Rasen, die auffallen",
    testimonials_sub: "Echte Ergebnisse von Leuten, die diesen Plänen folgen.",
    reviews_pill: "Bewertungen",
    reviews_heading: "Hinterlass einen Kommentar für die Crew",
    reviews_sub: "Teile, wie Kits oder Guides funktioniert haben. Frisches Feedback hält die Liste ehrlich.",
    reviews_form_title: "Kommentar schreiben",
    reviews_label_name: "Name",
    reviews_label_comment: "Kommentar",
    reviews_placeholder_name: "Dein Name oder Initialen",
    reviews_placeholder_comment: "Was hat sich auf deinem Rasen verändert?",
    reviews_label_rating: "Bewertung",
    reviews_button: "Kommentar posten",
    reviews_status: "Danke! Dein Kommentar ist live.",
    reviews_empty: "Noch keine Bewertungen. Sei die erste.",
    newsletter_pill: "Wochen-Checkliste",
    newsletter_heading: "Hol dir meine Sonntags-Mail",
    newsletter_sub: "Was sprühen, Schnitthöhe, Wetterhinweise - eine Mail pro Woche.",
    newsletter_placeholder: "du@email.de",
    newsletter_button: "Schick mir die Checkliste",
    newsletter_status: "Checkliste ist unterwegs. Bitte Postfach prüfen.",
    faq_pill: "FAQ",
    faq_heading: "Antworten vor dem Kauf",
    contact_pill: "Kontakt",
    contact_heading: "Braucht dein Rasen ein Kit?",
    contact_sub: "Erzähl mir von Fläche und Budget. Antwort in 48 Stunden.",
    contact_cta_call: "E-Mail",
    contact_cta_email: "E-Mail",
    contact_how_title: "So läuft es",
    contact_how_li1: "Teile Fläche, Sonne/Schatten und Ziele.",
    contact_how_li2: "Ich empfehle Tools/Produkte mit Links.",
    contact_how_li3: "Optional: 20-min Live-Through.",
    contact_location: "Region: North Charlotte, Huntersville, Cornelius, Davidson.",
    contact_form_title: "Kurz notieren",
    contact_label_name: "Name",
    contact_label_contact: "E-Mail",
    contact_label_message: "Was brauchst du?",
    contact_placeholder_name: "Dein Name",
    contact_placeholder_contact: "du@email.de",
    contact_placeholder_message: "Starter-Kit, Streifen, Unkraut-Rescue...",
    contact_form_btn: "Senden",
    contact_status: "Danke! Antwort folgt innerhalb von 48 Stunden.",
    footer_brand_sub: "Profi-Rasen-Equipment, jede Woche getestet",
    footer_note: "Affiliate-Links bringen Provision. Ich liste nur, was ich selbst nutze.",
    footer_shortcuts_title: "Shortcuts",
    footer_contact_title: "Kontakt",
    shortcut_bundles: "Bundles",
    shortcut_catalog: "Katalog",
    shortcut_checklist: "Checkliste",
    shortcut_faq: "FAQ",
    shortcut_form: "Formular",
    tag_affiliate: "Affiliate",
    tag_prop: "Profi-Auswahl",
    tag_must: "Pflicht",
    tag_pet: "Haustierfreundlich",
    tag_cool: "Kühle Saison",
    tag_time: "Timing wichtig",
    tag_spot: "Gezielte Behandlung",
    tag_eff: "Effizienz",
    tag_org: "Bio",
    tag_now: "Jetzt",
    tag_fall: "Herbst",
    tag_pdf: "PDF",
    product_view: "Ansehen",
    product_buy: "Jetzt kaufen",
  },
};

const products = {
  tools: [
    {
      name: { en: 'Reel mower (20")', de: 'Spindelmäher (20")' },
      note: { en: "Crisp cuts for cool-season turf", de: "Saubere Schnitte für kühle Saisonrasen" },
      tagKey: "tag_affiliate",
      link: "https://amzn.to/45SlreB",
      image: "images/tools/al-ko.webp",
      price: "$",
    },
    {
      name: { en: "Rotary mower w/ striping kit", de: "Rotationsmäher mit Streifen-Kit" },
      note: { en: "Easy stripes without scalping", de: "Einfache Streifen ohne Schälen" },
      tagKey: "tag_affiliate",
      link: "#",
      image: "images/tools/rotary-striping.jpg",
      price: "$$",
    },
    {
      name: { en: "Battery string trimmer", de: "Akku-Fadentrimmer" },
      note: { en: "Quiet edges, fast swaps", de: "Leise Kanten, schneller Wechsel" },
      tagKey: "tag_affiliate",
      link: "https://amzn.to/496Ye8P",
      image: "images/tools/fadentrimmer.jpg",
      price: "$",
    },
    {
      name: { en: "Lawn aerator", de: "Aerifizierer" },
      note: { en: "Pulls clean cores so air, water, and fert get down fast", de: "Zieht saubere Kerne, damit Luft, Wasser und Dünger schnell einziehen" },
      tagKey: "tag_must",
      link: "https://www.rasenwelt.de/products/arena-aerifizierer-mit-auffangbehalter",
      image: "images/tools/aerifizierer.jpg",
      imageClass: "aerator-compact",
      price: "$$",
    },
    {
      name: { en: "Hand spreader", de: "Handstreuer" },
      note: { en: "Quick spot seeding and light granular passes", de: "Schnelles Nachsaaten und leichte Granulat-Gaben" },
      tagKey: "tag_affiliate",
      link: "https://amzn.to/4nElb9h",
      image: "images/tools/handstreuer.jpg",
      price: "$",
    },
    {
      name: { en: "GARDENA garden hose", de: "GARDENA Gartenschlauch" },
      note: { en: "Tangle-free hose with solid fittings", de: "Verdrillfreier Schlauch mit soliden Anschlüssen" },
      tagKey: "tag_affiliate",
      link: "https://amzn.to/45SwSTD",
      image: "images/tools/gardena-schlauch.jpg",
      imageClass: "hose-compact",
      price: "$$",
    },
    {
      name: { en: "Leaf blower", de: "Laubbläser" },
      note: { en: "Clears clippings fast without hauling cords", de: "Bläst Schnittgut schnell weg - ganz ohne Kabel" },
      tagKey: "tag_affiliate",
      link: "https://amzn.to/3V64G9I",
      image: "images/tools/laubblaeser.jpg",
      price: "$$",
    },
    {
      name: { en: "Battery chain saw", de: "Akku-Kettensäge" },
      note: { en: "Fast limb cleanup without mixing fuel", de: "Schnelles Ast-Handling ohne Benzinmischung" },
      tagKey: "tag_affiliate",
      link: "https://amzn.to/3Id37Ur",
      image: "images/tools/saege.jpg",
      imageClass: "saw-compact",
      price: "$$",
    },
  ],
  consumables: [
    {
      name: { en: "Starter fertilizer 18-24-12", de: "Starterdünger 18-24-12" },
      note: { en: "Pet-safe after dry, great post-seed", de: "Haustierfreundlich nach Trocknung, top nach Saat" },
      tagKey: "tag_pet",
      link: "#",
      price: "$",
    },
    {
      name: { en: "Slow-release 25-0-5", de: "Langzeitdünger 25-0-5" },
      note: { en: "Monthly feed for steady color", de: "Monatliche Gabe für stabile Farbe" },
      tagKey: "tag_cool",
      link: "#",
      price: "$",
    },
    {
      name: { en: "Pre-emergent", de: "Vorsaat-Hemmer" },
      note: { en: "Keep crabgrass out early", de: "Hält frühzeitig Hirse & Co. fern" },
      tagKey: "tag_time",
      link: "#",
      price: "$",
    },
    {
      name: { en: "Selective herbicide", de: "Selektives Herbizid" },
      note: { en: "Targets weeds, spares turf", de: "Trifft Unkraut, schont Rasen" },
      tagKey: "tag_spot",
      link: "#",
      price: "$",
    },
    {
      name: { en: "Wetting agent", de: "Netzmittel" },
      note: { en: "Helps sprays stick and spread", de: "Hilft Sprays haften und verteilen" },
      tagKey: "tag_eff",
      link: "#",
      price: "$",
    },
    {
      name: { en: "Organic compost topdress", de: "Organische Kompost-Auflage" },
      note: { en: "Adds biology and structure", de: "Bringt Biologie und Struktur" },
      tagKey: "tag_org",
      link: "#",
      price: "$$",
    },
  ],
  videoGear: [
    {
      name: { en: "4K mirrorless camera", de: "4K Systemkamera" },
      note: { en: "Clean 4K/60 for kit demos", de: "Sauberes 4K/60 für Kit-Demos" },
      tagKey: "tag_affiliate",
      link: "#",
      image: "images/video/camera.jpg",
      price: "$$$",
    },
    {
      name: { en: "Shotgun mic", de: "Richtmikrofon" },
      note: { en: "Cuts mower noise, keeps voice crisp", de: "Schneidet Mäherlärm, Stimme bleibt klar" },
      tagKey: "tag_affiliate",
      link: "#",
      image: "images/video/shotgun.jpg",
      price: "$$",
    },
    {
      name: { en: "LED panel kit", de: "LED-Panel-Set" },
      note: { en: "Soft light for product close-ups", de: "Weiches Licht für Produkt-Nahaufnahmen" },
      tagKey: "tag_affiliate",
      link: "#",
      image: "images/video/led.jpg",
      price: "$$",
    },
  ],
  ebooks: [
    {
      name: { en: "Frühling Rasenpflege Ohne Bullshit", de: "Frühling Rasenpflege Ohne Bullshit" },
      note: {
        en: "Spring prep ebook with practical steps and product rates.",
        de: "Frühlings-Guide mit praktischen Schritten und Produktmengen.",
      },
      tagKey: "tag_pdf",
      priceId: "price_1SezEJ03vfZfX9BYQQRG6lXO",
      price: "€29.99",
    },
    {
      name: { en: "Striping Blueprint", de: "Striping Blueprint" },
      note: { en: "Mow heights, patterns, and fert schedule", de: "Schnitthöhen, Muster und Düngeplan" },
      tagKey: "tag_pdf",
      link: "#",
      price: "$24",
    },
    {
      name: { en: "Season Planner", de: "Season Planner" },
      note: { en: "Month-by-month tasks + rates", de: "Monatsplan mit Aufgaben und Mengen" },
      tagKey: "tag_pdf",
      link: "#",
      price: "$15",
    },
  ],
  seasonal: [
    {
      name: { en: "Summer heat kit", de: "Sommer-Hitze-Kit" },
      note: { en: "Stress blend + light N + surfactant", de: "Stress-Mix + leicht N + Netzmittel" },
      tagKey: "tag_now",
      link: "#",
      price: "$",
    },
    {
      name: { en: "Fungus watch pack", de: "Pilz-Check-Paket" },
      note: { en: "Preventative + curative options", de: "Präventive + kurative Optionen" },
      tagKey: "tag_now",
      link: "#",
      price: "$$",
    },
    {
      name: { en: "Overseed combo", de: "Nachsaat-Kombi" },
      note: { en: "Seed + starter fert + watering plan", de: "Saat + Starterdünger + Bewässerungsplan" },
      tagKey: "tag_fall",
      link: "#",
      price: "$$",
    },
  ],
};

const testimonials = [
  {
    name: "Casey P.",
    quote: {
      en: "Starter Stripe Kit + the weekly checklist = neighbors asking who my lawn guy is.",
      de: "Starter Stripe Kit + Wochen-Checkliste = Nachbarn fragen, wer mein Rasenprofi ist.",
    },
  },
  {
    name: "Marcus L.",
    quote: {
      en: "Followed the Rescue plan after a drought. Back to green in 3 weeks. The picks are legit.",
      de: "Nach Dürre den Rescue-Plan befolgt. Nach 3 Wochen wieder grün. Die Picks sind echt.",
    },
  },
  {
    name: "Jenna R.",
    quote: {
      en: "Love that he lists pet-safe options. Clear instructions, zero overwhelm.",
      de: "Mag die haustierfreundlichen Optionen. Klare Anweisungen, keine Überforderung.",
    },
  },
];

const faqs = [
  {
    q: {
      en: "Are these affiliate links?",
      de: "Sind das Affiliate-Links?",
    },
    a: {
      en: "Yes, some are. I only list products I personally use. Affiliate links keep the content free.",
      de: "Ja, manche. Ich liste nur Produkte, die ich selbst nutze. Affiliate-Links halten den Content kostenlos.",
    },
  },
  {
    q: {
      en: "Which kit should I start with?",
      de: "Mit welchem Kit soll ich starten?",
    },
    a: {
      en: "If you just want tidy cuts, start with the Starter Stripe Kit. For bold stripes, go Pro Striping.",
      de: "Für saubere Schnitte: Starter Stripe Kit. Für kräftige Streifen: Pro Striping.",
    },
  },
  {
    q: {
      en: "Are the fertilizers pet-safe?",
      de: "Sind die Dünger haustierfreundlich?",
    },
    a: {
      en: "I flag pet-friendly options. Always follow label re-entry times and water in when required.",
      de: "Haustierfreundliche Optionen sind markiert. Immer Wiedereinstiegszeiten beachten und einwässern, wenn nötig.",
    },
  },
  {
    q: {
      en: "Do you ship products?",
      de: "Versendest du Produkte?",
    },
    a: {
      en: "Links point to retailers I trust. Orders ship from them; my guides are instant downloads.",
      de: "Links führen zu Händlern, denen ich vertraue. Versand erfolgt über sie; meine Guides sind Sofort-Downloads.",
    },
  },
];

const reviewSeeds = [
  {
    name: "Mara D.",
    text: {
      en: "Starter Stripe kit took my yard from blotchy to striping in two mows.",
      de: "Starter Stripe Kit hat meinen Rasen in zwei Mähgängen von fleckig zu gestreift gebracht.",
    },
    createdAt: Date.now() - 1000 * 60 * 60 * 24 * 3,
    rating: 5,
  },
  {
    name: "Tariq H.",
    text: {
      en: "Followed the Rescue month plan - front lawn bounced back before a party.",
      de: "Den Rescue-Monatsplan befolgt - der Vorgarten war vor der Party wieder fit.",
    },
    createdAt: Date.now() - 1000 * 60 * 60 * 24 * 7,
    rating: 4,
  },
  {
    name: "Elise W.",
    text: {
      en: "Appreciate the pet-safe callouts. Sprays felt straightforward with the notes.",
      de: "Schätze die Haustier-Hinweise. Sprays waren mit den Notizen echt unkompliziert.",
    },
    createdAt: Date.now() - 1000 * 60 * 60 * 24 * 12,
    rating: 5,
  },
];

const $ = (s, scope = document) => scope.querySelector(s);
const $$ = (s, scope = document) => Array.from(scope.querySelectorAll(s));

let currentLang = "en";
const REVIEW_STORAGE_KEY = "datlawn_reviews";
let reviews = [];

function applyStaticTranslations(lang) {
  const dict = translations[lang] || translations.en;
  $$("[data-i18n]").forEach((el) => {
    const key = el.dataset.i18n;
    if (dict[key]) el.innerHTML = dict[key];
  });
  $$("[data-i18n-placeholder]").forEach((el) => {
    const key = el.dataset.i18nPlaceholder;
    if (dict[key]) el.placeholder = dict[key];
  });
}

function escapeHtml(str = "") {
  const safe = String(str);
  return safe
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#39;");
}

function formatDate(timestamp) {
  const date = new Date(timestamp || Date.now());
  if (Number.isNaN(date.getTime())) return "";
  const locale = currentLang === "de" ? "de-DE" : "en-US";
  return date.toLocaleDateString(locale, { month: "short", day: "numeric", year: "numeric" });
}

function loadReviews() {
  try {
    const stored = localStorage.getItem(REVIEW_STORAGE_KEY);
    if (stored) {
      const parsed = JSON.parse(stored);
      if (Array.isArray(parsed)) {
        reviews = parsed
          .filter((r) => r && r.name && r.text)
          .map((r) => ({
            name: String(r.name).slice(0, 80),
            text: typeof r.text === "string" ? r.text.slice(0, 800) : r.text,
            createdAt: r.createdAt || Date.now(),
            rating: Number(r.rating) || 0,
          }));
        if (reviews.length) return;
      }
    }
  } catch (err) {
    console.warn("Review storage read failed", err);
  }
  reviews = reviewSeeds.slice();
}

function saveReviews() {
  try {
    localStorage.setItem(REVIEW_STORAGE_KEY, JSON.stringify(reviews));
  } catch (err) {
    console.warn("Review storage save failed", err);
  }
}

function getReviewText(entry) {
  if (!entry || entry.text == null) return "";
  if (typeof entry.text === "string") return entry.text;
  if (typeof entry.text === "object") {
    return entry.text[currentLang] || entry.text.en || Object.values(entry.text)[0] || "";
  }
  return "";
}

function starDisplay(rating = 0) {
  const count = Math.max(0, Math.min(5, Math.round(rating)));
  const filled = Array.from({ length: count }, () => '<span class="star-filled">★</span>').join("");
  const empty = Array.from({ length: 5 - count }, () => '<span class="star-empty">★</span>').join("");
  return filled + empty;
}

function renderReviews() {
  const list = $("#reviewsList");
  const empty = $("#reviewsEmpty");
  if (!list) return;
  if (!reviews.length) {
    list.innerHTML = "";
    if (empty) empty.classList.remove("hidden");
    return;
  }
  const cards = reviews
    .map((r) => {
      const name = escapeHtml(r.name || "Guest");
      const text = escapeHtml(getReviewText(r));
      const formatted = text.replace(/\n/g, "<br>");
      const dateLabel = formatDate(r.createdAt);
      const stars = starDisplay(r.rating);
      return `
        <div class="review-card">
          <div class="review-meta">
            <span class="review-name">${name}</span>
            <span class="review-date">${dateLabel}</span>
          </div>
          <div class="star-display" aria-hidden="true">${stars}</div>
          <p class="review-text">${formatted}</p>
        </div>
      `;
    })
    .join("");
  list.innerHTML = cards;
  if (empty) empty.classList.add("hidden");
}

function addReview(name, comment, rating) {
  const cleanComment = (comment || "").trim();
  const cleanName = (name || "").trim() || "Guest";
  if (!cleanComment) return false;
  reviews.unshift({
    name: cleanName.slice(0, 80),
    text: cleanComment.slice(0, 800),
    createdAt: Date.now(),
    rating: Math.max(0, Math.min(5, Math.round(Number(rating) || 0))),
  });
  reviews = reviews.slice(0, 30);
  saveReviews();
  renderReviews();
  return true;
}

function initReviewForm() {
  const form = $("#reviewForm");
  const status = $("#reviewStatus");
  const starsWrap = $("#reviewStars");
  const hiddenRating = $("#reviewRating");
  if (!form) return;
  if (starsWrap && hiddenRating) {
    starsWrap.addEventListener("click", (e) => {
      const btn = e.target.closest(".star");
      if (!btn) return;
      const value = Number(btn.dataset.value) || 5;
      hiddenRating.value = value;
      $$(".star", starsWrap).forEach((star) => {
        star.classList.toggle("active", Number(star.dataset.value) <= value);
      });
    });
    const defaultValue = Number(hiddenRating.value) || 5;
    $$(".star", starsWrap).forEach((star) => {
      star.classList.toggle("active", Number(star.dataset.value) <= defaultValue);
    });
  }
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const nameInput = $("#reviewName");
    const commentInput = $("#reviewComment");
    const ratingInput = $("#reviewRating");
    const name = nameInput ? nameInput.value : "";
    const comment = commentInput ? commentInput.value : "";
    const rating = ratingInput ? ratingInput.value : 5;
    const added = addReview(name, comment, rating);
    if (!added) return;
    if (status) {
      const msg = (translations[currentLang] || translations.en).reviews_status;
      status.textContent = msg || "";
      status.classList.remove("hidden");
    }
    form.reset();
  });
}

function toggleNav() {
  const toggle = $(".nav-toggle");
  const links = $("#navLinks");
  if (!toggle || !links) return;
  toggle.addEventListener("click", () => links.classList.toggle("open"));
  $$("nav a").forEach((a) => a.addEventListener("click", () => links.classList.remove("open")));
}

function renderProducts() {
  const mapping = [
    ["toolsGrid", products.tools],
    ["consumablesGrid", products.consumables],
    ["videoGrid", products.videoGear],
    ["ebooksGrid", products.ebooks],
    ["seasonalGrid", products.seasonal],
  ];
  const dict = translations[currentLang] || translations.en;
  mapping.forEach(([id, items]) => {
    const grid = document.getElementById(id);
    if (!grid) return;
    grid.innerHTML = items
      .map((item) => {
        const name = item.name[currentLang] || item.name.en;
        const note = item.note[currentLang] || item.note.en;
        const tag = dict[item.tagKey] || translations.en[item.tagKey] || "";
        const view = dict.product_view || "View";
        const buy = dict.product_buy || "Buy";
        const initial = (name || "").trim().charAt(0) || "?";
        const safeInitial = escapeHtml(initial);
        const photoClass = item.imageClass ? ` ${item.imageClass}` : "";
        const imageBlock = item.image
          ? `<div class="product-photo${photoClass}" data-initial="${safeInitial}"><img src="${item.image}" alt="${name}" loading="lazy"></div>`
          : `<div class="product-photo placeholder${photoClass}"><span>${safeInitial}</span></div>`;
        const action = item.priceId
          ? `<button class="btn btn-primary checkout-btn" data-price="${item.priceId}">${buy}</button>`
          : `<a class="btn btn-ghost" href="${item.link}">${view}</a>`;
        return `
        <div class="product-card">
          ${imageBlock}
          <strong>${name}</strong>
          <p class="muted">${note}</p>
          ${action}
        </div>
      `;
      })
      .join("");
    initCheckoutButtons();
    attachImageFallbacks();
  });
}

function renderTestimonials() {
  const grid = $("#testimonialsGrid");
  if (!grid) return;
  grid.innerHTML = testimonials
    .map((t) => {
      const quote = t.quote[currentLang] || t.quote.en;
      return `
      <div class="card hero-bubble">
        <p>"${quote}"</p>
        <p class="muted">- ${t.name}</p>
      </div>
    `;
    })
    .join("");
}

function attachImageFallbacks() {
  $$(".product-photo img").forEach((img) => {
    img.addEventListener(
      "error",
      () => {
        const parent = img.parentElement;
        if (!parent) return;
        const initial = parent.dataset.initial || "?";
        parent.innerHTML = `<span>${escapeHtml(initial)}</span>`;
        parent.classList.add("placeholder");
      },
      { once: true }
    );
  });
}

function forceProductLinksNewTab() {
  $$(".product-card a").forEach((a) => {
    if (!a) return;
    if (!a.target || a.target === "_self") a.target = "_blank";
    const existingRel = a.getAttribute("rel") || "";
    const relParts = new Set(existingRel.split(/\s+/).filter(Boolean));
    relParts.add("noopener");
    relParts.add("noreferrer");
    a.setAttribute("rel", Array.from(relParts).join(" "));
  });
}

function renderFaq() {
  const list = $("#faqList");
  if (!list) return;
  list.innerHTML = faqs
    .map((f) => {
      const q = f.q[currentLang] || f.q.en;
      const a = f.a[currentLang] || f.a.en;
      return `
      <div class="faq-item">
        <h4>${q}</h4>
        <p>${a}</p>
      </div>
    `;
    })
    .join("");
}

function initForms() {
  const contactForm = $("#contactForm");
  const contactStatus = $("#contactStatus");
  if (contactForm) {
    contactForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const data = new FormData(contactForm);
      if (data.get("trap")) return;
      const msg = (translations[currentLang] || translations.en).contact_status;
      if (contactStatus) {
        contactStatus.textContent = msg || "";
        contactStatus.classList.remove("hidden");
      }
      contactForm.reset();
    });
  }

  const newsletterForm = $("#newsletterForm");
  const newsletterStatus = $("#newsletterStatus");
  if (newsletterForm) {
    newsletterForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const msg = (translations[currentLang] || translations.en).newsletter_status;
      if (newsletterStatus) {
        newsletterStatus.textContent = msg || "";
        newsletterStatus.classList.remove("hidden");
      }
      newsletterForm.reset();
    });
  }
}

function setLanguage(lang) {
  currentLang = lang === "de" ? "de" : "en";
  document.documentElement.lang = currentLang;
  document.documentElement.dataset.lang = currentLang;
  applyStaticTranslations(currentLang);
  renderProducts();
  renderTestimonials();
  renderFaq();
  renderReviews();
  const dict = translations[currentLang] || translations.en;
  const contactStatus = $("#contactStatus");
  if (contactStatus && !contactStatus.classList.contains("hidden")) {
    contactStatus.textContent = dict.contact_status || contactStatus.textContent;
  }
  const newsletterStatus = $("#newsletterStatus");
  if (newsletterStatus && !newsletterStatus.classList.contains("hidden")) {
    newsletterStatus.textContent = dict.newsletter_status || newsletterStatus.textContent;
  }
  const reviewStatus = $("#reviewStatus");
  if (reviewStatus && !reviewStatus.classList.contains("hidden")) {
    reviewStatus.textContent = dict.reviews_status || reviewStatus.textContent;
  }
  const langToggle = $("#langToggle");
  if (langToggle) langToggle.textContent = currentLang === "en" ? "DE" : "EN";
  forceProductLinksNewTab();
}

function initLanguageToggle() {
  const langToggle = $("#langToggle");
  if (!langToggle) return;
  langToggle.addEventListener("click", () => {
    const next = currentLang === "en" ? "de" : "en";
    setLanguage(next);
  });
}

async function startCheckout(priceId, btn) {
  if (!priceId) return;
  const originalText = btn.textContent;
  btn.disabled = true;
  btn.textContent = "...";
  try {
    const res = await fetch("/api/checkout", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ priceId }),
    });
    const data = await res.json();
    if (data.url) {
      window.location.href = data.url;
    } else {
      alert(data.error || "Unable to start checkout.");
    }
  } catch (err) {
    console.error(err);
    alert("Checkout failed. Please try again.");
  } finally {
    btn.disabled = false;
    btn.textContent = originalText;
  }
}

function initCheckoutButtons() {
  $$(".checkout-btn").forEach((btn) => {
    btn.addEventListener("click", () => startCheckout(btn.dataset.price, btn));
  });
}

document.addEventListener("DOMContentLoaded", () => {
  toggleNav();
  initLanguageToggle();
  initForms();
  loadReviews();
  initReviewForm();
  setLanguage("en");
});
